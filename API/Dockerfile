FROM node:alpine

WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .

EXPOSE 3000

ENV NODE_ENV="production"
ENV SWAGGER_BE=$SWAGGER_BE
ENV MONGO_URI=$MONGO_URI
ENV BASE_URL=$BASE_URL
ENV AUTH0_AUDIENCE=$AUTH0_AUDIENCE
ENV AUTH0_DOMAIN=$AUTH0_DOMAIN
ENV AUTH0_CLIENT_ID=$AUTH0_CLIENT_ID

CMD ["node", "./index.js"]